---
title: "第3章：れんぞくバトル！ - 複数の敵とたたかおう"
---

# 第3章：れんぞくバトル！ - 複数の敵とたたかおう

前回は1体の敵とたたかいました。今回は、複数の敵と連続でたたかえるようにします！

## 今回作るもの

![連続バトル画面](/images/python-rpg-game/03_multiple_battles.png)

- スライム、ゴブリン、オークと順番に戦う
- 敵をたおすと経験値がもらえる
- バトル間で少し体力が回復
- すべての敵をたおすとクリア！

## プログラムの説明

### 1. 敵のリスト管理

```python
self.enemy_list = [
    Enemy("スライム", 30, 5, 10, GREEN),
    Enemy("ゴブリン", 50, 8, 20, (139, 69, 19)),
    Enemy("オーク", 80, 12, 35, (100, 50, 30))
]
```

3体の敵を順番に戦うように設定しています。それぞれ異なる：
- HP（体力）
- 攻撃力
- 経験値
- 色（見た目）

### 2. バトル進行の管理

```python
self.current_enemy_index = 0  # 現在の敵の番号
self.current_enemy = None     # 現在戦っている敵
```

どの敵と戦っているかを記録して、順番に進めます。

### 3. バトル間の回復

```python
# 回復
self.hero.hp = min(self.hero.hp + 20, self.hero.max_hp)
self.show_recovery = True
self.recovery_timer = 60
```

バトルの間に少し体力が回復します。`min()`を使って最大HPを超えないようにしています。

### 4. 敵の描画の違い

```python
if self.current_enemy.name == "スライム":
    # スライムの描画
elif self.current_enemy.name == "ゴブリン":
    # ゴブリンの描画
elif self.current_enemy.name == "オーク":
    # オークの描画
```

敵の種類によって違う見た目で描画します：
- **スライム**: 緑色のぷるぷるした形
- **ゴブリン**: 茶色で武器を持った姿
- **オーク**: 大きくて牙がある姿

## ゲームの流れ

1. **第1戦：スライム** - HP30の弱い敵
2. **第2戦：ゴブリン** - HP50の中くらいの敵
3. **第3戦：オーク** - HP80の強い敵
4. **バトル間** - HPが20回復
5. **全クリア** - すべての敵を倒すと勝利！

## 新しい要素

- **経験値システム**: 敵を倒すと経験値を獲得
- **回復エフェクト**: 緑色の文字でフェードイン・アウト
- **バトル進行表示**: 「第○戦 / 3」で進行状況を表示
- **敵ごとの見た目**: それぞれ違うビジュアル

## 実行してみよう

```bash
task run03
```

- 名前を入力してEnterキー
- ↑↓キーでコマンドを選択
- Enterキーで決定
- 3体の敵を順番に倒そう！

## 練習問題

1. 敵の種類を増やしてみよう（ドラゴンなど）
2. バトル後の回復量を変えてみよう（20→30）
3. 敵の色を変えてみよう

## 次回予告

次の章では、魔法を使えるようにします！
ファイアで大ダメージを与えたり、ヒールで回復したりできるようになりますよ。