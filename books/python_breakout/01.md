---
title: "パドルを動かそう"
---

# 01: パドルを動かそう

このしょうでは、Pygame（パイゲーム）をつかって、パドル（ボールを打ち返す板）をつくり、キーボードで左右に動かします。

:::message
**このチャプターで学ぶこと**
- Pygame の基本的な使い方（画面の作成、メインループ）
- クラスを使ってゲームのパーツを作る方法
- キーボード入力でキャラクターを動かす方法
- 画面の外に出ないようにする「境界チェック」
:::

## プログラムのもくてき

- ゲームの「がめん」をつくる
- 「パドル」をつくって、左右キーで動かす
- 画面の外に出ないようにする

![第1章の実行結果](/images/python_breakout/chapter01.png)

## コードのポイント

### 1. 基本設定（じゅんび）

```python
import pygame
import sys

# 画面サイズ
SCREEN_WIDTH = 480
SCREEN_HEIGHT = 640

# 色の定義
BLACK = (0, 0, 0)
WHITE = (255, 255, 255)
BLUE = (0, 128, 255)

# パドルの設定
PADDLE_WIDTH = 80
PADDLE_HEIGHT = 15
```

- `import pygame` で、ゲームを作るための「どうぐ」を読み込みます
- `SCREEN_WIDTH = 480` と `SCREEN_HEIGHT = 640` で、画面の大きさを決めます
- `BLACK = (0, 0, 0)` は RGB という色の表し方で、黒を意味します
- 定数（変わらない数）は、大文字で書くのがプログラミングのルールです

### 2. パドルクラスをつくる

```python
class Paddle(pygame.sprite.Sprite):
    """プレイヤーが操作するパドル（板）"""

    def __init__(self):
        super().__init__()
        self.image = pygame.Surface((PADDLE_WIDTH, PADDLE_HEIGHT))
        self.image.fill(BLUE)
        self.rect = self.image.get_rect()
        # 画面の下の方、中央に配置
        self.rect.centerx = SCREEN_WIDTH // 2
        self.rect.bottom = SCREEN_HEIGHT - 30
        self.speed = 8
```

- `class Paddle` で、パドルの「せいしつ」と「どうさ」をまとめています
- `pygame.sprite.Sprite` を継承することで、ゲームのパーツとして使えるようになります

:::details 💡 クラス（Class）ってなに？
クラスは、**「たいやき」の型（かた）** のようなものです。
型（クラス）がひとつあれば、そこからたくさんの「たいやき（実体）」を作ることができます。

ここでは「パドルの設計図（クラス）」を作って、そこから「実際に画面にでるパドル」を生み出しています。
:::

- `self.rect.centerx = SCREEN_WIDTH // 2` で、パドルを画面の中央に配置しています
- `//` は「切り捨て割り算」で、480 // 2 = 240 になります
- `self.speed = 8` は、1フレームに動く距離（ピクセル）です

### 3. パドルを動かす

```python
def update(self):
    """キー入力でパドルを左右に動かす"""
    keys = pygame.key.get_pressed()

    if keys[pygame.K_LEFT]:
        self.rect.x -= self.speed
    if keys[pygame.K_RIGHT]:
        self.rect.x += self.speed

    # 画面の外に出ないようにする
    if self.rect.left < 0:
        self.rect.left = 0
    if self.rect.right > SCREEN_WIDTH:
        self.rect.right = SCREEN_WIDTH
```

- `update` 関数は、毎フレームごとに呼ばれてパドルを動かします
- `pygame.key.get_pressed()` で、どのキーが押されているかチェックします
- `if keys[pygame.K_LEFT]:` は「もし左キーが押されていたら」という意味です
- `self.rect.x -= self.speed` で、パドルを左に動かします（xが減る）
- 画面の外に出ないように、位置を調整しています（境界チェック）

### 4. メインループのしくみ

```python
def main():
    pygame.init()
    screen = pygame.display.set_mode((SCREEN_WIDTH, SCREEN_HEIGHT))
    pygame.display.set_caption("ブロック崩し - 01")

    # パドルを作成
    paddle = Paddle()
    paddle_group = pygame.sprite.Group(paddle)

    clock = pygame.time.Clock()

    while True:
        clock.tick(60)  # 60FPS

        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                pygame.quit()
                sys.exit()

        # パドルを更新
        paddle_group.update()

        # 画面を黒でクリア
        screen.fill(BLACK)

        # パドルを描画
        paddle_group.draw(screen)

        # 画面を更新
        pygame.display.flip()
```

- `pygame.init()` で Pygame を初期化します
- `while True:` で、ゲームが終わるまでずっと繰り返します（メインループ）

:::details 💡 無限ループ（Main Loop）ってなに？
ゲームは「パラパラ漫画」と同じ仕組みで動いています。
1. 絵をかく
2. ちょっとだけ動かす
3. また絵をかく
...という作業を、超高速（1秒に60回！）で繰り返すことで、動いているように見えます。
この「ずっと繰り返す」仕組みのことを、**メインループ** と呼びます。
:::

- `clock.tick(60)` で、1秒間に60回の速さで動くようにしています（60FPS）
- プログラムの流れは「入力を受け取る → 計算する → 画面に表示する」の繰り返しです

## 最終的なコード

```python
import pygame
import sys

# 画面サイズ
SCREEN_WIDTH = 480
SCREEN_HEIGHT = 640

# 色の定義
BLACK = (0, 0, 0)
WHITE = (255, 255, 255)
BLUE = (0, 128, 255)

# パドルの設定
PADDLE_WIDTH = 80
PADDLE_HEIGHT = 15


class Paddle(pygame.sprite.Sprite):
    """プレイヤーが操作するパドル（板）"""

    def __init__(self):
        super().__init__()
        self.image = pygame.Surface((PADDLE_WIDTH, PADDLE_HEIGHT))
        self.image.fill(BLUE)
        self.rect = self.image.get_rect()
        # 画面の下の方、中央に配置
        self.rect.centerx = SCREEN_WIDTH // 2
        self.rect.bottom = SCREEN_HEIGHT - 30
        self.speed = 8

    def update(self):
        """キー入力でパドルを左右に動かす"""
        keys = pygame.key.get_pressed()

        if keys[pygame.K_LEFT]:
            self.rect.x -= self.speed
        if keys[pygame.K_RIGHT]:
            self.rect.x += self.speed

        # 画面の外に出ないようにする
        if self.rect.left < 0:
            self.rect.left = 0
        if self.rect.right > SCREEN_WIDTH:
            self.rect.right = SCREEN_WIDTH


def main():
    pygame.init()
    screen = pygame.display.set_mode((SCREEN_WIDTH, SCREEN_HEIGHT))
    pygame.display.set_caption("ブロック崩し - 01")

    # パドルを作成
    paddle = Paddle()
    paddle_group = pygame.sprite.Group(paddle)

    clock = pygame.time.Clock()

    while True:
        clock.tick(60)

        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                pygame.quit()
                sys.exit()

        # パドルを更新
        paddle_group.update()

        # 画面を黒でクリア
        screen.fill(BLACK)

        # パドルを描画
        paddle_group.draw(screen)

        # 画面を更新
        pygame.display.flip()


if __name__ == "__main__":
    main()
```

## まとめ

このチャプターでは、Pygame の基本的な使い方と、パドルを動かす仕組みを学びました。

- **クラス** を使って、ゲームのパーツ（パドル）を作りました
- **キー入力** で、パドルを左右に動かせるようになりました
- **境界チェック** で、パドルが画面の外に出ないようにしました

![チャプター1のまとめ](/images/python_breakout/summary_01.png)

次のチャプターでは、ボールを作って動かしていきます。
